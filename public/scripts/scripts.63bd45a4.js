"use strict";angular.module("monitoringDashboardApp",["ngAnimate","ngCookies","ngResource","ngSanitize","ngTouch","ui.router","angular-flot","ngMap","bw.paging","ui.bootstrap","btford.socket-io"]),function(){function a(a){a.$on("$stateChangeStart",function(b,c,d){a.toState=c,a.toStateParams=d})}function b(a,b){b.otherwise("/"),a.state("site",{"abstract":!0}).state("Home",{parent:"site",url:"/",data:{roles:[]},views:{"page@":{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"ctrl"}},params:{home:!0}}).state("Monitor",{parent:"site",url:"/monitor",data:{roles:[]},views:{"page@":{templateUrl:"views/monitor.html",controller:"MonitorCtrl",controllerAs:"ctrl"}},params:{home:!0}}).state("Control",{parent:"site",url:"/control",data:{roles:[]},views:{"page@":{templateUrl:"views/control.html",controller:"ControlCtrl",controllerAs:"ctrl"}},params:{home:!0}}).state("Lamps Settings",{parent:"site",url:"/lampsettings",data:{roles:[]},views:{"page@":{templateUrl:"views/lampsettings.html",controller:"LampSettingsCtrl",controllerAs:"ctrl"}},params:{home:!0}})}angular.module("monitoringDashboardApp").config(b).run(a),b.$inject=["$stateProvider","$urlRouterProvider"],a.$inject=["$rootScope"]}(),angular.module("monitoringDashboardApp").run(["$templateCache",function(a){a.put("views/control.html",'<div class="row"> <div class="col-lg-12"> <div class="box box-danger" ng-show="!ctrl.mode"> <div class="box-header with-border"> <i class="fa fa-gears"></i> <h3 class="box-title">Adjustment Table</h3> </div> <!-- /.box-header --> <div class="box-body"> <div class="row"> <div class="col-xs-6 col-md-6 col-lg-6"><label>Entries: </label> <select style="width:50px;height:30px;display:inline" ng-options="entry for entry in ctrl.entries" ng-model="ctrl.show"> </select> </div> </div> <div class="row"> <div class="col-xs-12 col-md-8 col-lg-8 col-lg-offset-2 col-md-offset-2"> <div class="table-responsive"> <table class="table table-striped table-condensed table-hover"> <thead> <tr> <th style="text-align: center">Id</th> <th>Location</th> <th style="text-align: center">Adjustment</th> <th style="text-align: center">Adj. Date</th> </tr> </thead> <tbody> <tr style="cursor:default" ng-repeat="lamp in ctrl.dataset |  limitTo: ctrl.show"> <td>{{lamp.id}}</td> <td>{{lamp.location.address}}, &lt;{{lamp.location.gps_coordinate.latitude}},{{lamp.location.gps_coordinate.longitude}}&gt;</td> <td style="text-align: center">{{lamp.light_intensity}}%</td> <td style="text-align: center">{{lamp.substitution_date}}</td> </tr> </tbody> </table> </div> </div> </div> </div> <div class="box-footer"> <div class="row"> <div class="col-lg-5 col-xs-12"> Showing {{ctrl.shift+1}} to {{ctrl.shift+ctrl.show}} of {{ctrl.data.length}} entries<br> {{ctrl.testData.id}},{{ctrl.testData.consumo}} </div> <div class="col-lg-7 col-xs-12"> <span class="pull-right"> <div paging page="ctrl.currentPage" page-size="ctrl.show" total="ctrl.data.length" paging-action="ctrl.pagingAction(page, pageSize)"> </div> </span> </div> </div> </div> </div> </div> </div>'),a.put("views/lampsettings.html",'<!-- Delete Mode--> <div class="row" ng-if="ctrl.mode === \'delete\'"> <div class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offsest-2 col-xs-12"> <div class="box box-danger"> <div class="box-header with-border"> <h3 class="box-title">Delete Lamp</h3> </div> <div class="box-body"> <h4>You are going to delete this Lamp:</h4> <div class="col-xs-8 col-xs-offset-2"> <ul> <li><b>Id</b>: {{ctrl.selected.id}}</li> <li><b>Model</b>: {{ctrl.selected.model}}</li> <li><b>Address</b>: {{ctrl.selected.location.address}}</li> <li><b>Latitude</b>: {{ctrl.selected.location.gps_coordinate.latitude}}</li> <li><b>Longitude</b>: {{ctrl.selected.location.gps_coordinate.longitude}}</li> <li><b>Power Consumption</b>: {{ctrl.selected.power_consumption}}%</li> <li><b>Light Intensity</b>: {{ctrl.selected.light_intensity}}%</li> <li><b>Substitution Date</b>: {{ctrl.selected.substitution_date}}</li> <li><b>State</b>: <span ng-if="ctrl.selected.state_on">On</span><span ng-if="!ctrl.selected.state_on">Off</span></li> </ul> </div> </div> <div class="box-footer"> <div class="row"> <div class="col-xs-12 col-md-12 col-lg-12"> <button class="btn btn-flat btn-warning pull-right" style="margin-bottom:5px;margin-right:5px" tooltip-append-to-body="true" ng-click="ctrl.switchMode(null)" uib-tooltip="Go Back">Back <span class="fa fa-undo"></span></button> <button ng-disabled="ctrl.selected === null" class="btn btn-flat btn-danger pull-right" style="margin-bottom:5px;margin-right:5px" tooltip-append-to-body="true" ng-click="ctrl.deleteLamp()" uib-tooltip="Delete Selected Lamps">Delete <span class="fa fa-trash"></span></button> </div> </div> </div> </div> </div> </div> <!-- Add Mode--> <div class="row" ng-if="ctrl.mode === \'add\'"> <div class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offsest-2 col-xs-12"> <div class="box box-success"> <div class="box-header with-border"> <h3 class="box-title">Add Lamp</h3> </div> <!-- /.box-header --> <div class="box-body"> <h4>Insert new Lamp data:</h4> <form role="form"> <!-- text input --> <div class="row"> <div class="col-lg-10 col-lg-offset-1 col-md-10 col-md-offset-1 col-xs-10 col-xs-offset-1"> <div class="form-group"> <div class="col-xs-2" style="height:34px; padding-top:1%; padding-right: 0px"> <label class="control-label pull-right">Id</label> </div> <div class="col-xs-10"> <input type="text" class="form-control" placeholder="Id" ng-model="ctrl.newLamp.id"> </div> </div><br><br> <div class="form-group"> <div class="col-xs-2" style="height:34px; padding-top:1%; padding-right: 0px"> <label class="control-label pull-right">Model</label> </div> <div class="col-xs-10"> <input type="text" class="form-control" placeholder="Model" ng-model="ctrl.newLamp.model"> </div> </div><br><br> <div class="form-group"> <div class="col-xs-2" style="height:34px; padding-top:1%; padding-right: 0px"> <label class="control-label pull-right">Address</label> </div> <div class="col-xs-10"> <input type="text" class="form-control" placeholder="Address" ng-model="ctrl.newLamp.location.address"> </div> </div><br><br> <div class="form-group"> <div class="col-xs-2" style="height:34px; padding-top:1%; padding-right: 0px"> <label class="control-label pull-right">Latitude</label> </div> <div class="col-xs-10"> <input type="text" class="form-control" placeholder="Latitude" ng-model="ctrl.newLamp.location.gps_coordinate.latitude"> </div> </div><br><br> <div class="form-group"> <div class="col-xs-2" style="height:34px; padding-top:1%; padding-right: 0px"> <label class="control-label pull-right">Longitude</label> </div> <div class="col-xs-10"> <input type="text" class="form-control" placeholder="Longitude" ng-model="ctrl.newLamp.location.gps_coordinate.longitude"> </div> </div> </div> </div> </form> </div> <div class="box-footer"> <div class="row"> <div class="col-xs-12 col-md-12 col-lg-12"> <button class="btn btn-flat btn-warning pull-right" style="margin-bottom:5px;margin-right:5px" tooltip-append-to-body="true" ng-click="ctrl.switchMode(null)" uib-tooltip="Go Back">Back <span class="fa fa-undo"></span></button> <button class="btn btn-flat btn-success pull-right" style="margin-bottom:5px;margin-right:5px" tooltip-append-to-body="true" ng-class="{\'disabled\': !ctrl.validateForm() }" ng-click="ctrl.addLamp()" uib-tooltip="Save added Lamp">Save <span class="fa fa-save"></span></button> </div> </div> </div> </div> </div> </div> <div class="row"> <div class="col-lg-12"> <div class="box box-danger" ng-show="!ctrl.mode"> <div class="box-header with-border"> <i class="fa fa-table"></i> <h3 class="box-title">Lamps Table</h3> </div> <!-- /.box-header --> <div class="box-body"> <div class="alert alert-warning alert-dismissible" ng-show="!ctrl.clicked"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true">Ã—</button> <i class="icon fa fa-info"></i>Click on item to enable Delete Button </div> <div class="row"> <div class="col-xs-6 col-md-6 col-lg-6"><label>Entries: </label> <select style="width:50px;height:30px;display:inline" ng-options="entry for entry in ctrl.entries" ng-model="ctrl.show"> </select> </div> <div class="col-xs-6 col-md-6 col-lg-6"><span class="pull-right"><input ng-model="ctrl.searchText" placeholder="Search..."></span> </div> </div> <div class="row" style="margin-top: 5px"> <div class="col-xs-12 col-md-12 col-lg-12"> <button ng-disabled="ctrl.selected === null" class="btn btn-xs btn-flat btn-danger pull-right" style="margin-bottom:5px;margin-right:5px" tooltip-append-to-body="true" ng-click="ctrl.switchMode(\'delete\')" uib-tooltip="Delete Selected Lamps">Delete <span class="fa fa-trash"></span></button> <button class="btn btn-xs btn-flat btn-success pull-right" style="margin-bottom:5px;margin-right:5px" tooltip-append-to-body="true" ng-click="ctrl.switchMode(\'add\')" uib-tooltip="Add New Lamp">New <span class="fa fa-plus"></span></button> </div> </div> <div class="table-responsive"> <table class="table table-condensed"> <thead> <tr> <th style="text-align: center">Id</th> <th>Location</th> <th style="text-align: center">Model</th> <th style="text-align: center">Power Cons.</th> <th style="text-align: center">State</th> <th style="text-align: center">Light Int.</th> <th style="text-align: center">Sub. Date</th> </tr> </thead> <tbody> <tr style="cursor:pointer" ng-repeat="lamp in ctrl.dataset | filter:ctrl.searchFilter | limitTo: ctrl.show" ng-class="{\'selected\': ctrl.selected === lamp}" ng-click="ctrl.select(lamp)"> <td>{{lamp.id}}</td> <td>{{lamp.location.address}}, &lt;{{lamp.location.gps_coordinate.latitude}},{{lamp.location.gps_coordinate.longitude}}&gt;</td> <td style="text-align: center">{{lamp.model}}</td> <td style="text-align: center">{{lamp.power_consumption}}%</td> <td ng-if="lamp.state_on" style="text-align: center">On</td> <td ng-if="!lamp.state_on" style="text-align: center">Off</td> <td style="text-align: center">{{lamp.light_intensity}}%</td> <td style="text-align: center">{{lamp.substitution_date}}</td> </tr> </tbody> </table> </div> </div> <div class="box-footer"> <div class="row"> <div class="col-lg-5 col-xs-12"> Showing {{ctrl.shift+1}} to {{ctrl.shift+ctrl.show}} of {{ctrl.data.length}} entries </div> <div class="col-lg-7 col-xs-12"> <span class="pull-right"> <div paging page="ctrl.currentPage" page-size="ctrl.show" total="ctrl.data.length" paging-action="ctrl.pagingAction(page, pageSize)"> </div> </span> </div> </div> </div> </div> </div> </div>'),a.put("views/main.html",'<div class="row"> <div class="col-lg-10 col-lg-offset-1 col-md-offset-1 col-md-10"> <h2>Welcome to Light Control-Monitoring System!</h2><br> <p align="justify"> The main goal of this project is to provide a system to manage the illumination network of a Smart City.<br><br> <b>Light Control-Monitoring System</b> is made-up of three main sections: <ul> <li><p align="justify"><b>Monitoring System:</b> through this section it is possible to see the latest faulty street lamps in the network, the oldest street lamps, or statistics over power consumption to plan maintenance operations. </p></li> <li><p align="justify"><b>Control System:</b> in this section it is possible to see the latest operations made to control the network of street lights of the city in automatic way, as the light intensity adaptation according to the luminous intensity of natural light or the intensity of vehicular traffic.</p></li> <li><p align="justify"><b>Lamps Settings:</b> section provides the capability to manage the network of street lights, adding or removing a lamp or a set of lamps.</p></li> </ul> </p> </div> </div>'),a.put("views/monitor.html",'<div class="row"> <div class="col-lg-7 col-md-12 col-xs-12"> <div class="box box-danger"> <div class="box-header with-border"> <i class="fa fa-table"></i> <h3 class="box-title">Residual Lifetime Rank</h3> </div> <!-- /.box-header --> <div class="box-body"> <div class="table-responsive"> <table class="table table-striped table-condensed table-hover"> <thead> <tr> <th>Id</th> <th>Location</th> <th style="text-align: center">Consumption</th> <th style="text-align: center">Residual Lifetime</th> </tr> </thead> <tbody> <tr ng-repeat="lamp in ctrl.rankData"> <td>{{lamp.lampId}}</td> <td>{{lamp.address}}</td> <td style="text-align: center">{{lamp.consumption}}%</td> <td style="text-align: center">{{lamp.residualLifeTime}}</td> </tr> </tbody> </table> </div> </div> <div class="box-footer"> </div> </div> </div> <div class="col-lg-5 col-md-12 col-xs-12"> <div class="box box-danger"> <div class="box-header with-border"> <i class="fa fa-map"></i> <h3 class="box-title">Lamps Map</h3> </div> <div class="box-body"> <div map-lazy-load="https://maps.google.com/maps/api/js"> <ng-map default-style="true" center="41.9100711,12.5359979" zoom="12"> <marker id="{{shop.id}}" position="{{shop.position}}" ng-repeat="shop in ctrl.shops" on-click="ctrl.showDetail(shop)"> </marker> <info-window id="foo-iw"> <div ng-non-bindable=""> id: {{ctrl.shop.id}}<br> name: {{ctrl.shop.name}}<br> Position 1: {{ctrl.shop.position}}<br> Position 2: {{anchor.getPosition()}}<br> Position 3: {{ctrl.map.markers[ctrl.shop.id].getPosition()}}<br> <a href="#" ng-click="ctrl.clicked()">Click Here</a> </div> </info-window> </ng-map> </div> </div> <div class="box-footer"> <button class="btn btn-xs btn-flat btn-danger pull-right" ng-click="ctrl.showDetail(e, ctrl.shop)" style="margin-left:5px"> Show </button> <button class="btn btn-xs btn-flat btn-danger pull-right" ng-click="ctrl.hideDetail(e, ctrl.shop)"> Hide </button> </div> </div> </div> </div> <!--<div class="row">\n  <div class="col-lg-12">\n\n    <div class="box box-danger">\n      <div class="box-header with-border">\n        <div class="row">\n          <div class="col-lg-6 col-md-8 col-sm-8 col-xs-12">\n            <i class="fa fa-area-chart"></i>\n            <h3 class="box-title">Real-Time Consumption Chart</h3>\n          </div>\n          <div class="col-lg-6 col-sm-4 col-md-4 col-xs-12">\n            <div class="box-tools pull-right">\n              Real time\n              <div class="btn-group" id="realtime" data-toggle="btn-toggle">\n                <button type="button" class="btn btn-default btn-xs " ng-class="{\'active\':ctrl.update}" ng-click="ctrl.switch()">On</button>\n                <button type="button" class="btn btn-default btn-xs" ng-class="{\'active\':!ctrl.update}" ng-click="ctrl.switch()">Off</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="box-body">\n        <div style="height: 300px; padding: 0px; position: relative;">\n          <flot dataset="ctrl.dataset" options="ctrl.options"></flot>\n\n        </div>\n      </div>\n    </div>\n\n\n  </div>\n</div>\n<div class="row">\n\n\n\n</div>\n\n<script>$(\'flot > div\');</script>\n\n&lt;!&ndash; jQuery 2.2.3 &ndash;&gt;\n<script src="../../scripts/plugins/jQuery/jquery-2.2.3.min.js"></script>\n&lt;!&ndash; FLOT CHARTS &ndash;&gt;\n<script src="../../scripts/plugins/flot/jquery.flot.min.js"></script>\n&lt;!&ndash; FLOT RESIZE PLUGIN - allows the chart to redraw when the window is resized &ndash;&gt;\n<script src="../../scripts/plugins/flot/jquery.flot.resize.min.js"></script>\n&lt;!&ndash; FLOT PIE PLUGIN - also used to draw donut charts &ndash;&gt;\n<script src="../../scripts/plugins/flot/jquery.flot.pie.min.js"></script>\n&lt;!&ndash; FLOT CATEGORIES PLUGIN - Used to draw bar charts &ndash;&gt;\n<script src="../../scripts/plugins/flot/jquery.flot.categories.min.js"></script>-->')}]);